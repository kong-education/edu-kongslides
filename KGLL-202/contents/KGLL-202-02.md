# View Docker Compose and SSL Configuration

For the purposes of this course we will deploy Kong using docker compose:

We will perform the following specific tasks:
1. Peruse Kong Gateway Configuration
2. View SSL Certificates

## Task 1: Peruse Kong Gateway Configuration

Take a few minutes to read through the docker-compose.yaml file in the installation directory.

```shell
yq docker-compose.yaml
```

You can see this compose file will deploy a number of containers including: 

- Kong Data Plane - kong-dp
- Kong Control Plane - kong-cp
- Database - db
- An email SMTP server - smtp-server

(The 'smtp-server' container is used by the Dev Portal to send emails to Kong admins and developers)

These services are bound to the network `kong-edu-net` 

## Task 2: View SSL Certificates

To be ultra secure you should create custom SSL Certificates for each component. However for our training lab we will use two certificates:

1. A **'server.crt'** certificate for Admin API, Kong Manager GUI, Dev Portal GUI, and Dev Portal API
2. A **'cluster.crt'** certificate for intra-cluster communications

These certificates are generated for our lab at boot time.  The docker-compose file expects to find the SSL certificate/key pairs in the /etc/kong/ssl/ directory and are mounted in the running container under '/srv/shared/ssl-certs'


```shell
ls -l /etc/kong/ssl/
```
```
-r--r--r-- 1 root root  525 Mar 26 11:53 cluster.crt
-r--r--r-- 1 root root  305 Mar 26 11:53 cluster.key
-r--r--r-- 1 root root 4234 Mar 26 11:53 server.crt
-r--r--r-- 1 root root  227 Mar 26 11:53 server.key
```

```shell
yq .services.kong-cp.volumes docker-compose.yaml
```
```
...
    volumes:
    - /etc/kong/ssl:/srv/shared/ssl
    ...
...
```

